<! doctype HTML>
<html>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link rel="stylesheet" type="text/css" href="/index.css" />

  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <script>
    AFRAME.registerComponent('markerhandler', {
      init: function () {
        const animatedMarker = this.el;

        animatedMarker.addEventListener('markerFound', () => {
          console.log('marker found');
          
        });
        
        animatedMarker.addEventListener('markerLost', () => {
          console.log('marker lost');
        });

        // по клику увеличивается моделька и через полсекунды возвращает размер)
        animatedMarker.addEventListener('click', function (ev, target) {
          console.log('click');
            const model = document.querySelector('#animated-model');
            const scale = model.getAttribute('scale');

            Object.keys(scale).forEach((key) => (scale[key] = scale[key] + 0.5));
            model.setAttribute('scale', scale);

            setTimeout(() => {
              Object.keys(scale).forEach((key) => (scale[key] = scale[key] - 0.5));
              model.setAttribute('scale', scale);
            }, 500);
         
    });
      }
    });
  </script>

  <body style="margin: 0px; overflow: scroll">
    <a-scene arjs embedded id="scene">
      <a-assets>
        <a-asset-item
          id="bowser"
          src="https://cdn.glitch.com/06bd98b4-97ee-4c07-a546-fe39ca205034%2Fbowser.glb"
        >
        </a-asset-item>
      </a-assets>
      <a-marker preset="hiro" id="animated-marker" markerhandler>
        <a-entity
        id="animated-model"
        gltf-model="#bowser"
        position="0 0 0"
        scale="0.05 0.05 0.05"
        class="clickable"
       
      >
      </a-marker>
      <a-entity camera> </a-entity>
    </a-scene>
  </body>
</html>
